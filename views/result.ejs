<!DOCTYPE html>
<html>
<head>
  <title>Parsed PDF Output</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>
<body class="p-5">
  <div class="container">
    <h2 class="mb-4">Parsed PDF Structure</h2>
    <a href="/" class="btn btn-secondary mb-3">Upload Another PDF</a>

    <table class="table table-bordered">
      <thead>
        <tr>
          <th>Section</th>
          <th>Start Page</th>
          <th>End Page</th>
        </tr>
      </thead>
      <tbody>
        <% for (let key in output) { %>
          <tr>
            <td><%= key %></td>
            <td><%= output[key].start_page %></td>
            <td><%= output[key].end_page %></td>
          </tr>
        <% } %>
      </tbody>
    </table>

    <h4 class="mt-4">Raw JSON</h4>
    <!-- Copy button -->
    <button id="copyBtn" class="btn btn-outline-primary mb-2">Copy JSON</button>

    <!-- JSON block -->
    <pre id="jsonBlock"><%= JSON.stringify(output, null, 2) %></pre>
  </div>

  <script>
    document.getElementById("copyBtn").addEventListener("click", function() {
      const jsonText = document.getElementById("jsonBlock").innerText;
      navigator.clipboard.writeText(jsonText).then(() => {
        this.innerText = "Copied!";
        setTimeout(() => { this.innerText = "Copy JSON"; }, 1500);
      }).catch(err => {
        alert("Failed to copy JSON: " + err);
      });
    });
  </script>
</body>
</html>
